generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id           String   @id @default(cuid())
  email        String   @unique
  passwordHash String  @map("password_hash")
  name         String?
  role         Role     @default(USER)
  createdAt    DateTime @default(now()) @map("created_at")
  updatedAt    DateTime @updatedAt @map("updated_at")

  @@map("users")
}

enum Role {
  USER
  ADMIN
}

model Plan {
  id          String   @id @default(cuid())
  name        String
  tagline     String?
  price       String
  period      String?
  description String?
  features    String[] // Postgres array
  cta         String?
  href        String?
  popular     Boolean  @default(false)
  order       Int      @default(0)
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")

  @@map("plans")
}

model CaseStudy {
  id        String   @id @default(cuid())
  company   String
  quote     String
  author    String
  role      String   // e.g. "Director of Career Services"
  order     Int      @default(0)
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("case_studies")
}

model ContactSubmission {
  id          String   @id @default(cuid())
  requestType String   @map("request_type")
  name        String
  email       String
  subject     String?
  message     String
  createdAt   DateTime @default(now()) @map("created_at")

  @@map("contact_submissions")
}

model AppSubmission {
  id               String   @id @default(cuid())
  companyName      String   @map("company_name")
  website          String?
  developerEmail   String   @map("developer_email")
  developerName    String   @map("developer_name")
  appName          String   @map("app_name")
  appDescription   String   @map("app_description")
  appUrl           String?  @map("app_url")
  integrationTypes String[] @map("integration_types") // Postgres array
  appStage         String   @map("app_stage")
  apiUsage         String?  @map("api_usage")
  webhooksNeeded   Boolean  @default(false) @map("webhooks_needed")
  dataAccess       String?  @map("data_access")
  whyCareerOS      String   @map("why_careeros")
  termsAccepted    Boolean  @map("terms_accepted")
  createdAt        DateTime @default(now()) @map("created_at")

  @@map("app_submissions")
}
